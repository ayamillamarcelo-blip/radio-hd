<!DOCTYPE html>
<html>
<head><title>EMISOR CELULAR</title><meta name="viewport" content="width=device-width, initial-scale=1.0"></head>
<body style="background:#000; color:#fff; font-family:sans-serif; text-align:center;">
    <h2>üì± EMISOR (CELULAR)</h2>
    <button onclick="llamar()" style="padding:20px; background:#0f0; width:80%; font-weight:bold;">üî¥ TRANSMITIR</button>
    <p id="info">Listo para conectar</p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.5.2/peerjs.min.js"></script>
    <script>
        function llamar() {
            const info = document.getElementById('info');
            navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
                const peer = new Peer(); // El celular puede tener cualquier ID
                
                peer.on('open', () => {
                    info.innerText = "Llamando a la central...";
                    // LLAMAMOS AL ID FIJO QUE PUSIMOS EN LA PC
                    const call = peer.call('RADIO-PRUEBA-123', stream);
                    
                    call.on('error', err => {
                        info.innerText = "Error: " + err.type;
                        if(err.type === 'peer-unavailable') {
                            alert("¬°LA PC NO EST√Å CONECTADA! Dale al bot√≥n en la PC primero.");
                        }
                    });
                });
            });
        }
    </script>
</body>
</html>


