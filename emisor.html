<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>游님 EMISOR 4G</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        .box { border: 2px solid #00ff00; border-radius: 15px; padding: 20px; }
        input { width: 90%; padding: 15px; margin: 10px 0; border-radius: 10px; border: none; font-size: 16px; }
        button { background: #00ff00; color: #000; padding: 20px; width: 100%; border-radius: 10px; font-weight: bold; border: none; font-size: 18px; }
        #status { margin-top: 20px; color: #00ff00; font-weight: bold; }
    </style>
</head>
<body>
    <div class="box">
        <h2>游니 TRANSMISOR 4G</h2>
        <p>ID de la Central a llamar:</p>
        <input type="text" id="id-destino" value="RADIO-ESTUDIO-1">
        <button onclick="transmitir()">游댮 TRANSMITIR AHORA</button>
        <div id="status">Listo para salir al aire</div>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.5.2/peerjs.min.js"></script>
<script>
    let peer;
    const config = { 'iceServers': [{ 'urls': 'stun:stun.l.google.com:19302' }, { 'urls': 'stun:stun1.l.google.com:19302' }] };

    function transmitir() {
        const idDestino = document.getElementById('id-destino').value;
        document.getElementById('status').innerText = "Iniciando micr칩fono...";

        navigator.mediaDevices.getUserMedia({ audio: true, video: false })
        .then(stream => {
            peer = new Peer({ config: config });
            
            peer.on('open', () => {
                document.getElementById('status').innerText = "Conectando con Central...";
                const call = peer.call(idDestino, stream);
                
                call.on('stream', () => {
                    document.getElementById('status').innerText = "游댮 TRANSMITIENDO EN VIVO";
                });
            });

            peer.on('error', err => {
                alert("Error: " + err.type);
                document.getElementById('status').innerText = "Error de conexi칩n";
            });
        })
        .catch(err => alert("Error de micr칩fono: " + err));
    }
</script>
</body>
</html>

