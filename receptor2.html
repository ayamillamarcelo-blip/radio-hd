<!DOCTYPE html>
<html>
<head><title>RECEPTOR PC</title></head>
<body style="background:#000; color:#0f0; font-family:monospace; text-align:center;">
    <h2>ðŸ“» RECEPTOR (PC)</h2>
    <button onclick="iniciar()" style="padding:20px; background:#0f0; font-weight:bold;">1. CONECTAR CENTRAL</button>
    <h3 id="status">ESTADO: DESCONECTADO</h3>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.5.2/peerjs.min.js"></script>
    <script>
        let peer;
        function iniciar() {
            // USAMOS UN ID FIJO PARA QUE NO HAYA ERROR
            peer = new Peer('RADIO-PRUEBA-123'); 

            peer.on('open', (id) => {
                document.getElementById('status').innerText = "ðŸŸ¢ ONLINE: " + id;
                console.log("Central lista.");
            });

            peer.on('call', call => {
                call.answer();
                call.on('stream', stream => {
                    const audio = new Audio();
                    audio.srcObject = stream;
                    audio.play();
                    document.getElementById('status').innerText = "ðŸ”´ TRANSMITIENDO";
                });
            });

            peer.on('error', err => alert("Error: " + err.type));
        }
    </script>
</body>
</html>


